<html>

<head>
<title>CsvJdbc Home</title>
<link href="additions.css" rel="stylesheet" type="text/css" />

<meta name="description" content="CsvJdbc is a simple open-source,read-only JDBC driver that uses Comma Separated Value (CSV) files as database tables. It is ideal for writing data import programs.">
<meta name="keywords" content="CSV, JDBC, Java, Driver, open source, Comma Separated Value">

</head>

<body bgcolor="#FFFFFF">

<table border="0" cellpadding="2" cellspacing="1">
  <tr>
    <td><img src="CsvJdbcLogo.jpg" width="182" height="108" alt="The CsvJdbc Logo"></td>
    <td><h1>CsvJdbc - a JDBC driver for CSV files</td>
  </tr>
  <tr>
    <td align="center" valign="bottom">Hosted by <br><a href="http://sourceforge.net/projects/csvjdbc/"><img
      src="http://sourceforge.net/sflogo.php?group_id=17973"
      alt="SourceForge Logo" border="0" width="88" height="31"></a>
    </td>
    <td valign="top">
      <h3>About</h3>
      <hr noshade size="1">
      <p>CsvJdbc is a simple read-only JDBC driver that uses
      Comma Separated Value (CSV) files as database tables. It is ideal for writing data
      import programs.</p>

      <p>This driver enables you to access a directory containing CSV files as
      if it were a database containing tables.  Since there is no real database
      management system behind the scenes, not all JDBC functionality is
      implemented.</p>
      
    </td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td valign="top">
      <h3>Usage</h3>
      <hr noshade size="1">
      <p>The CsvJdbc driver is used just like any other JDBC driver:
      <ul>
        <li>load the driver class, (its full name is <tt>org.relique.jdbc.csv.CsvDriver</tt>)</li>
        <li>use the <tt>DriverManager</tt> to get a connection to the database (the directory)</li>
        <li>create a statement object</li>
        <li>use the statement object to execute a query (only SELECT is currently supported) </li>
        <li>the result of the query is a <tt>ResultSet</tt></li>
      </ul>
      </p>
      
      <p>The following example puts all of the above steps into practice.</p>

      <pre>
import java.sql.*;

public class DemoDriver
{
  public static void main(String[] args)
  {
    try
    {
      // load the driver into memory
      Class.forName("org.relique.jdbc.csv.CsvDriver");

      // create a connection. The first command line parameter is assumed to
      //  be the directory in which the .csv files are held
      Connection conn = DriverManager.getConnection("jdbc:relique:csv:" + args[0] );

      // create a Statement object to execute the query with
      Statement stmt = conn.createStatement();

      // Select the ID and NAME columns from sample.csv
      ResultSet results = stmt.executeQuery("SELECT ID,NAME FROM sample");

      // dump out the results
      while (results.next())
      {
        System.out.println("ID= " + results.getString("ID") +
                        "   NAME= " + results.getString("NAME"));
      }

      // clean up
      results.close();
      stmt.close();
      conn.close();
    }
    catch(Exception e)
    {
      System.out.println("Oops-> " + e);
    }
  }
}
      </pre>
      </code>
        <p></p>
    </td>
  </tr>
</tr>
<tr>
  <td>&nbsp;</td>
  <td valign="top">
    <h3>Advanced Options</h3>
    <hr size="1" noshade>
    <p>The driver also supports a number of parameters that change the default behaviour of the driver.</p>
    <p>These properties are:</p>
    <p>
    <dl>
      <dt>separator</dt>
      <dd>type: character</dd>
      <dd>default: <tt>','</tt></dd>
      <dd>Used to specify a different column separator.</dd>
      
      <dt>suppressHeaders</dt>
      <dd>type: boolean</dd>
      <dd>default: <tt>False</tt></dd>
      <dd>Used to specify that the file does not contain column header information.  if <tt>False</tt>, column headers are on first line.</dd>

      <dt>headerline</dt>
      <dd>type: string</dd>
      <dd>default: None</dd>
      <dd>useful in combination with above suppressHeaders, to specify a custom header line that matches the data.</dd>
      <dd>with suppressHeaders and without headerline, all columns are named sequentially COLUMNx. </dd>

      <dt>fileExtension</dt>
      <dd>type: string</dd>
      <dd>default: <tt>".csv"</tt></dd>
      <dd>Used to specify a different file extension.</dd>

      <dt>columnTypes</dt>
      <dd>type: String</dd>
      <dd>default: infer from data</dd>
      <dd>you can use this property to provide the driver with a comma-separated string with names of SQL data types.  when you retrieve a record field with <tt>getObject</tt> (as opposed to <tt>getString</tt>), the driver will parse the string and return you a correctly typed object.</dd>
      <dd>the order must match the column order in the file.</dd>
      <dd>if you provide less types than the number of columns, the last type is repeated for all trailing columns.</dd>

      <dt>skipLeadingLines</dt>
      <dd>type: Integer</dd>
      <dd>default: <tt>0</tt></dd>
      <dd>after opening a file, skip this many lines before starting interpreting its content.</dd>

      <dt>skipLeadingDataLines</dt>
      <dd>type: Integer</dd>
      <dd>default: <tt>0</tt></dd>
      <dd>after reading the header from a file, skip this many lines before starting interpreting lines as records.</dd>

      <dt>defectiveHeaders</dt>
      <dd>type: Boolean</dd>
      <dd>default: <tt>False</tt></dd>
      <dd>in case a column name is the emtpy string, replace it with COLUMNx, where x is the ordinal identifying the column.</dd>

      <dt>commentChar</dt>
      <dd>type: Character</dd>
      <dd>default: <tt>#</tt></dd>
      <dd>lines before the header starting with this character are ignored.  once the header has been read, all lines are considered as holding data.</dd>

      <dt>quotechar</dt>
      <dd>type: Character</dd>
      <dd>default: <tt>"</tt></dd>
      <dd>how values are quoted.  useful when values contain line breaks.</dd>

      <dt>timestampFormat, dateFormat, timeFormat</dt>
      <dd>type: String</dd>
      <dd>default: <tt>YYYYMMDD HHmm</tt>, <tt>YYYYMMDD</tt>, <tt>HHmm</tt></dd>
      <dd>if you indicate a column to be of type Timestamp, Date or Time, the driver will try to parse each value string with these format strings to return a correctly valued typed object.</dd>

      <dt>ignoreNonParseableLines</dt>
      <dd>type: Boolean</dd>
      <dd>default: <tt>False</tt></dd>
      <dd>when True, unparseable lines will not cause exceptions but will be silently ignored.</dd>

      <dt>indexedFiles</dt>
      <dd>type: Boolean</dd>
      <dd>default: <tt>False</tt></dd>
      <dd>when True, all files with a filename matching the table name plus the regular expression given in property <b>fileTailPattern</b> are read as if they were a single file.</dd>

      <dt>fileTailPattern</dt>
      <dd>type: String</dd>
      <dd>default: <tt>null</tt></dd>
      <dd>Regular expression for matching filenames when property <b>indexedFiles</b> is True.  If the regular expression contains groups (surrounded by parentheses) then the value of each group in matching filenames is added as an extra column to each line read from that file.  For example, when querying table <tt>test</tt>, the regular expression <tt>-(\d+)-(\d+)</tt> will match files <tt>test-001-20081112.csv</tt> and <tt>test-002-20081113.csv</tt>.  The column values <tt>001</tt> and <tt>20081112</tt> are added to each line read from the first file and <tt>002</tt> and <tt>20081113</tt> are added to each line read from the second file.</dd>

      <dt>fileNameParts</dt>
      <dd>type: String</dd>
      <dd>default: <tt>null</tt></dd>
      <dd>Comma-separated list of column names for the additional columns generated by regular expression groups in the property <tt>fileTailPattern</tt>.</dd>

      <dt>fileTailPrepend</dt>
      <dd>type: Boolean</dd>
      <dd>default: <tt>False</tt></dd>
      <dd>when True, columns generated by regular expression groups in the <tt>fileTailPattern</tt> property are prepended to the start of each line.  When False, the generated columns are appended after the columns read for each line.</dd>

      <dt>trimHeaders</dt>
      <dd>type: Boolean</dd>
      <dd>default: <tt>False</tt></dd>
      <dd></dd>

      <dt>cryptoFilterClassName</dt>
      <dd>type: Class</dd>
      <dd>default: <tt>null</tt></dd>
      <dd>The full class name of a Java class that decrypts the file being read.  The class must implement interface <tt>org.relique.io.CryptoFilter</tt>.  The class <tt>org.relique.io.XORFilter</tt> included in CsvJdbc implements an XOR encryption filter.</dd>
      
      <dt>cryptoFilterParameterTypes</dt>
      <dd>type: String</dd>
      <dd>default: <tt>String</tt></dd>
      <dd>Comma-separated list of data types to pass to the constructor of the decryption class set in property <tt>cryptoFilterClassName</tt>.</dd>

      <dt>cryptoFilterParameters</dt>
      <dd>type: String</dd>
      <dd>default: </dd>
      <dd>Comma-separated list of values to pass to the constructor of the decryption class set in property <tt>cryptoFilterClassName</tt>.</dd>

    </dl>
    </p>
    
    <p>This following example code shows how some of these properties are
    used. </p>
    
    <pre>  ...

  Properties props = new java.util.Properties();

  props.put("separator", "|");              // separator is a bar
  props.put("suppressHeaders", "true");     // first line contains data
  props.put("fileExtension", ".txt");       // file extension is .txt

  Connection conn = Drivermanager.getConnection("jdbc:relique:csv:" + args[0], props)

  ...
    </pre>
    <p></p>
  </td>
</tr>
<tr>
  <td>&nbsp;</td>
  <td valign="top">
    <h3>Download</h3>
    <hr noshade size="1">
    <p>The latest version of the software is available from
    <a href="http://www.sourceforge.net/projects/csvjdbc">sourceforge.net</a>.
    </p>
  </td>
</tr>
</table>

<p></p>
<p><i>Last modified: $Id$</i> </p>
</body>
</html>
